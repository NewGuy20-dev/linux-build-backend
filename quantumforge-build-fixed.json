{
  "base": "arch",
  "architecture": "x86_64",
  "kernel": {
    "version": "linux-lts",
    "customFlags": ["kaslr", "stack-protector"],
    "modules": {
      "enable": ["btrfs", "dm-crypt", "apparmor"],
      "disable": ["bluetooth", "pcspkr", "floppy"]
    }
  },
  "init": "systemd",
  "filesystem": {
    "root": "btrfs",
    "encryption": "luks2",
    "compression": true,
    "partitions": [
      {
        "mount": "/boot",
        "size": "1G"
      },
      {
        "mount": "/home", 
        "size": "50G",
        "encrypted": true
      },
      {
        "mount": "/var",
        "size": "20G",
        "encrypted": true
      }
    ],
    "lvm": false,
    "raid": false
  },
  "display": {
    "server": "wayland",
    "compositor": "hyprland",
    "bar": "waybar",
    "launcher": "rofi",
    "terminal": "kitty",
    "theme": "catppuccin-dark"
  },
  "packages": [
    "base", "linux-lts", "linux-firmware", "btrfs-progs", "cryptsetup",
    "docker", "python", "python-pip", "nodejs", "npm", "rust", "go",
    "git", "hyprland", "waybar", "rofi", "kitty", "firefox",
    "networkmanager", "systemd-resolved", "nftables", "apparmor",
    "postgresql", "redis", "nginx", "zsh", "vim", "curl", "wget"
  ],
  "securityFeatures": {
    "mac": ["apparmor"],
    "firewall": {
      "backend": "nftables", 
      "policy": "deny",
      "rules": [
        {
          "port": 22,
          "protocol": "tcp",
          "action": "allow"
        },
        {
          "port": 443,
          "protocol": "tcp", 
          "action": "allow"
        },
        {
          "port": 80,
          "protocol": "tcp",
          "action": "allow"
        }
      ]
    },
    "kernelHardening": ["kaslr", "stack-protector"]
  },
  "services": {
    "enable": ["NetworkManager", "systemd-resolved", "docker", "postgresql", "redis", "nginx"],
    "disable": ["bluetooth", "sshd"]
  },
  "backup": {
    "tool": "borg",
    "schedule": "daily"
  },
  "customization": {
    "shell": "zsh",
    "theme": "catppuccin",
    "dotfiles": "https://github.com/user/dotfiles.git"
  },
  "postInstall": {
    "scripts": [
      "#!/bin/bash",
      "# QuantumForge OS Post-Install Configuration",
      "echo 'Setting up QuantumForge OS...'",
      "",
      "# System optimization",
      "echo 'vm.swappiness=10' >> /etc/sysctl.conf",
      "echo 'vm.vfs_cache_pressure=50' >> /etc/sysctl.conf",
      "",
      "# Install AUR helper",
      "pacman -S --noconfirm base-devel",
      "git clone https://aur.archlinux.org/yay.git /tmp/yay",
      "cd /tmp/yay && makepkg -si --noconfirm",
      "",
      "# Install development tools",
      "yay -S --noconfirm vscodium-bin k3s-bin poetry",
      "",
      "# Setup Oh My Zsh",
      "sh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"",
      "",
      "# Configure Hyprland",
      "mkdir -p ~/.config/hypr",
      "echo 'exec-once = waybar &' > ~/.config/hypr/hyprland.conf",
      "",
      "# Setup monitoring stack", 
      "systemctl enable --now prometheus grafana netdata",
      "",
      "# Configure automatic snapshots",
      "systemctl enable --now snapper-timeline.timer snapper-cleanup.timer",
      "",
      "# Setup AI/ML environment",
      "pip install torch tensorflow jupyter ollama",
      "",
      "# Generate system documentation",
      "echo '# QuantumForge OS' > /home/user/README.md",
      "echo 'Advanced security-hardened Linux distribution' >> /home/user/README.md",
      "",
      "echo 'QuantumForge OS setup completed!'"
    ]
  }
}
