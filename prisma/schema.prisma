datasource db {
  provider = "postgresql"
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

model UserBuild {
  id           String          @id @default(cuid())
  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt
  status       String          @default("PENDING")
  cancelledAt  DateTime?
  baseDistro   String
  spec         Json
  logs         BuildLog[]
  artifacts    BuildArtifact[]
}

model BuildLog {
  id        String    @id @default(cuid())
  createdAt DateTime  @default(now())
  message   String
  build     UserBuild @relation(fields: [buildId], references: [id])
  buildId   String
}

model BuildArtifact {
  id        String    @id @default(cuid())
  createdAt DateTime  @default(now())
  fileName  String
  fileType  String
  url       String
  build     UserBuild @relation(fields: [buildId], references: [id])
  buildId   String
}
